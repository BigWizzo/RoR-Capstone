<div class="d-none d-md-block">
  <h1 class="p-3 text-center m-0 blue-bg lt-gray-clr">Subject Clockings</h1>
</div>

<div class="container-fluid">
  <div class="row content">

  <%= render 'subjects/nav' %>
    
    <div class="col-md-9">
      <div class="dash d-none d-md-block">
        <div class="row mt-4">
          <div class="col-md-3 text-center">
            <div class="chunk">
              <h4 class="dash-h">Total Subjects</h4>
              <p class="dash-p"><%=@subjects.count%> subjects</p> 
            </div>
          </div>
          <div class="col-md-3 text-center">
            <div class="chunk">
              <h4 class="dash-h">Subject Clockings</h4>
              <p class="dash-p"><%= count_subject_clock %> Hours</p> 
            </div>
          </div>
          <div class="col-md-3 text-center">
            <div class="chunk">
              <h4 class="dash-h">External Clockings</h4>
              <p class="dash-p"><%= count_external_clock %> Hours</p> 
            </div>
          </div>
          <div class="col-md-3 text-center">
            <div class="chunk">
              <h4 class="dash-h">Total Hours</h4>
              <p class="dash-p"><%= total_hours %> Hours</p> 
            </div>
          </div>
        </div>
      </div>
      <div class="chunk container pt-3">
        <div class="row">
          <div class="clock-type col-10">
            <h4>Subject based clockings</h4>
          </div>
          <div class="clock-total col-2 text-center">
            <%= count_subject_clock %> Hours
          </div>
        </div>
      </div>
      <% @subjects.each do |subject| %>
        <% subject.clockings.each do |clocking| %>
          <%if subject.title != "External"%>
            <div class="card mb-3">
              <div class="row no-gutters">
                <div class="col-3 card-wrap">
                  <%= image_tag(subject.icon.variant(extent: "10:7"), class: "card-img") %>
                </div>
                <div class="col-7">
                  <div class="card-body py-1">
                    <h5 class="card-title m-0"><%= clocking.topic %></h5>
                    <p class="card-text mb-2">
                      <small class="text-muted"><%=subject.title%>: </small>
                      <small class="text-muted">
                        Created: <%= clocking.created_at.strftime("#{clocking.created_at.day.ordinalize} %B %Y") %>
                      </small>
                    </p>
                    <p class="card-detail mb-2"><%= clocking.details %></p>
                  </div>
                </div>
                <div class="col-2">
                  <h5 class="row justify-content-center m-3"><%= clocking.duration %> Hours</h5>
                </div>
              </div>
            </div>
          <%end%>
        <% end %>
      <%end%>
    </div>
  </div>
</div>
